import"/build/_shared/chunk-4A7TD3UN.js";import{c as u,d as w}from"/build/_shared/chunk-XTSUA3K3.js";import{a as $,e as f,k as g,m as x,p as n}from"/build/_shared/chunk-2XIQZIKO.js";import"/build/_shared/chunk-O4KSJSQ7.js";import{c as r}from"/build/_shared/chunk-MEPKJ2VW.js";var l=r($());var t=r(n());function m({product:e}){let{price:c,compareAtPrice:d}=e.variants?.nodes[0]||{},p=d?.amount>c?.amount;return(0,t.jsx)(f,{to:`/products/${e.handle}`,children:(0,t.jsxs)("div",{className:"grid gap-6",children:[(0,t.jsxs)("div",{className:"shadow-sm rounded relative h-40 ",children:[p&&(0,t.jsx)("label",{className:"subpixel-antialiased absolute top-0 right-0 m-4 text-right text-notice text-red-600 text-xs z-10",children:"Sale"}),(0,t.jsx)(w,{className:"rounded hover:-translate-y-0.5 hover:shadow-lg duration-500 h-40 transform object-cover",data:e.variants.nodes[0].image,alt:e.title})]}),(0,t.jsxs)("div",{className:"grid gap-1",children:[(0,t.jsx)("h3",{className:"max-w-prose text-copy w-full overflow-hidden whitespace-nowrap text-ellipsis ",children:e.title}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsxs)("span",{className:"max-w-prose whitespace-pre-wrap inherit text-copy flex gap-4",children:[(0,t.jsx)(u,{withoutTrailingZeros:!0,data:c}),p&&(0,t.jsx)(u,{className:"line-through opacity-50",withoutTrailingZeros:!0,data:d})]})})]})]})})}var a=r(n());function h({collection:e,url:c}){let[d,p]=(0,l.useState)(e.products.pageInfo.hasNextPage),[N,b]=(0,l.useState)(e.products.pageInfo.endCursor),[y,P]=(0,l.useState)(e.products.nodes||[]),s=x();function C(){s.load(`${c}?index&cursor=${N}`)}return(0,l.useEffect)(()=>{if(!s.data)return;let{collection:i}=s.data;P(L=>[...L,...i.products.nodes]),p(i.products.pageInfo.hasNextPage),b(i.products.pageInfo.endCursor)},[s.data]),(0,a.jsxs)("section",{className:"w-full gap-4 md:gap-8 grid",children:[(0,a.jsx)("div",{className:"grid-flow-row grid gap-2 gap-y-6 md:gap-4 lg:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:y.map(i=>(0,a.jsx)(m,{product:i},i.id))}),d&&(0,a.jsx)("div",{className:"flex items-center justify-center mt-6",children:(0,a.jsx)("button",{className:"inline-block rounded font-medium text-center py-3 px-6 border w-full cursor-pointer bg-rose-200 text-white",disabled:s.state!=="idle",onClick:C,children:s.state!=="idle"?"Loading...":"Load more products"})})]})}var o=r(n()),k=({data:e})=>({title:e?.collection?.title,description:e?.collection?.description}),I={seo:k};var E=({data:e})=>({title:e?.collection?.title??"Collection",description:e?.collection?.description});function v(){let{collection:e}=g();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("header",{className:"grid w-full gap-8 py-4 pb-14 text-center	underline underline-offset-8",children:[(0,o.jsx)("h1",{className:"text-2xl whitespace-pre-wrap inline-block",children:e.title}),e.description&&(0,o.jsx)("div",{className:"flex items-baseline justify-between w-full",children:(0,o.jsx)("div",{children:(0,o.jsx)("p",{className:"max-w-md whitespace-pre-wrap inherit text-copy inline-block",children:e.description})})})]}),(0,o.jsx)(h,{collection:e,url:`/collections/${e.handle}`})]})}export{v as default,I as handle,E as meta};
//# sourceMappingURL=/build/routes/collections/$handle-QBAWH6SW.js.map
