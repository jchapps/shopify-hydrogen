{
  "version": 3,
  "sources": ["../../../../../app/components/ProductGrid.jsx", "../../../../../app/components/ProductCard.jsx", "../../../../../app/routes/collections/$handle.jsx"],
  "sourcesContent": ["import {useFetcher} from '@remix-run/react';\nimport {useEffect, useState} from 'react';\nimport ProductCard from './ProductCard';\n\nexport default function ProductGrid({collection, url}) {\n  const [nextPage, setNextPage] = useState(\n    collection.products.pageInfo.hasNextPage,\n  );\n\n  const [endCursor, setEndCursor] = useState(\n    collection.products.pageInfo.endCursor,\n  );\n\n  const [products, setProducts] = useState(collection.products.nodes || []);\n\n  // For making client-side requests\n  // https://remix.run/docs/en/v1/hooks/use-fetcher\n  const fetcher = useFetcher();\n\n  function fetchMoreProducts() {\n    // ?index differentiates index routes from their parent layout routes\n    // https://remix.run/docs/en/v1/guides/routing#what-is-the-index-query-param\n    fetcher.load(`${url}?index&cursor=${endCursor}`);\n  }\n\n  useEffect(() => {\n    if (!fetcher.data) return;\n    const {collection} = fetcher.data;\n\n    setProducts((prev) => [...prev, ...collection.products.nodes]);\n    setNextPage(collection.products.pageInfo.hasNextPage);\n    setEndCursor(collection.products.pageInfo.endCursor);\n  }, [fetcher.data]);\n\n  return (\n    <section className=\"w-full gap-4 md:gap-8 grid\">\n      <div className=\"grid-flow-row grid gap-2 gap-y-6 md:gap-4 lg:gap-6 grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\n        {products.map((product) => (\n          <ProductCard key={product.id} product={product} />\n        ))}\n      </div>\n      {nextPage && (\n        <div className=\"flex items-center justify-center mt-6\">\n          <button\n            className=\"inline-block rounded font-medium text-center py-3 px-6 border w-full cursor-pointer bg-rose-200 text-white\"\n            disabled={fetcher.state !== 'idle'}\n            onClick={fetchMoreProducts}\n          >\n            {fetcher.state !== 'idle' ? 'Loading...' : 'Load more products'}\n          </button>\n        </div>\n      )}\n    </section>\n  );\n}\n", "import {Link} from '@remix-run/react';\nimport {Image, Money} from '@shopify/hydrogen';\n\nexport default function ProductCard({product}) {\n  const {price, compareAtPrice} = product.variants?.nodes[0] || {};\n  const isDiscounted = compareAtPrice?.amount > price?.amount;\n\n  return (\n    <Link to={`/products/${product.handle}`}>\n      <div className=\"grid gap-6\">\n        <div className=\"shadow-sm rounded relative h-40 \">\n          {isDiscounted && (\n            <label className=\"subpixel-antialiased absolute top-0 right-0 m-4 text-right text-notice text-red-600 text-xs z-10\">\n              Sale\n            </label>\n          )}\n          <Image\n            className=\"rounded hover:-translate-y-0.5 hover:shadow-lg duration-500 h-40 transform object-cover\"\n            data={product.variants.nodes[0].image}\n            alt={product.title}\n          />\n        </div>\n        <div className=\"grid gap-1\">\n          <h3 className=\"max-w-prose text-copy w-full overflow-hidden whitespace-nowrap text-ellipsis \">\n            {product.title}\n          </h3>\n          <div className=\"flex gap-4\">\n            <span className=\"max-w-prose whitespace-pre-wrap inherit text-copy flex gap-4\">\n              <Money withoutTrailingZeros data={price} />\n              {isDiscounted && (\n                <Money\n                  className=\"line-through opacity-50\"\n                  withoutTrailingZeros\n                  data={compareAtPrice}\n                />\n              )}\n            </span>\n          </div>\n        </div>\n      </div>\n    </Link>\n  );\n}\n", "//new\n\nimport {useLoaderData} from '@remix-run/react';\nimport {json} from '@shopify/remix-oxygen';\nimport ProductGrid from '../../components/ProductGrid';\n\nconst seo = ({data}) => ({\n  title: data?.collection?.title,\n  description: data?.collection?.description,\n});\n\nexport const handle = {\n  seo,\n};\n\nexport async function loader({params, context, request}) {\n  const {handle} = params;\n  const searchParams = new URL(request.url).searchParams;\n  const cursor = searchParams.get('cursor');\n\n  const {collection} = await context.storefront.query(COLLECTION_QUERY, {\n    variables: {\n      handle,\n      cursor,\n    },\n  });\n\n  // Handle 404s\n  if (!collection) {\n    throw new Response(null, {status: 404});\n  }\n\n  // json is a Remix utility for creating application/json responses\n  // https://remix.run/docs/en/v1/utils/json\n  return json({\n    collection,\n  });\n}\n\nexport const meta = ({data}) => {\n  return {\n    title: data?.collection?.title ?? 'Collection',\n    description: data?.collection?.description,\n  };\n};\n\nexport default function Collection() {\n  const {collection} = useLoaderData();\n  return (\n    <>\n      <header className=\"grid w-full gap-8 py-4 pb-14 text-center\tunderline underline-offset-8\">\n        <h1 className=\"text-2xl whitespace-pre-wrap inline-block\">\n          {collection.title}\n        </h1>\n\n        {collection.description && (\n          <div className=\"flex items-baseline justify-between w-full\">\n            <div>\n              <p className=\"max-w-md whitespace-pre-wrap inherit text-copy inline-block\">\n                {collection.description}\n              </p>\n            </div>\n          </div>\n        )}\n      </header>\n      <ProductGrid\n        collection={collection}\n        url={`/collections/${collection.handle}`}\n      />\n    </>\n  );\n}\n\nconst COLLECTION_QUERY = `#graphql\n  query CollectionDetails($handle: String!, $cursor: String) {\n    collection(handle: $handle) {\n      id\n      title\n      description\n      handle\n      products(first: 4, after: $cursor) {\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          id\n          title\n          publishedAt\n          handle\n          variants(first: 1) {\n            nodes {\n              id\n              image {\n                url\n                altText\n                width\n                height\n              }\n              price {\n                amount\n                currencyCode\n              }\n              compareAtPrice {\n                amount\n                currencyCode\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n"],
  "mappings": "oRACA,IAAAA,EAAkC,OCS1B,IAAAC,EAAA,OAPO,SAARC,EAA6B,CAAC,QAAAC,CAAO,EAAG,CAC7C,GAAM,CAAC,MAAAC,EAAO,eAAAC,CAAc,EAAIF,EAAQ,UAAU,MAAM,IAAM,CAAC,EACzDG,EAAeD,GAAgB,OAASD,GAAO,OAErD,SACE,OAACG,EAAA,CAAK,GAAI,aAAaJ,EAAQ,SAC7B,oBAAC,OAAI,UAAU,aACb,qBAAC,OAAI,UAAU,mCACZ,UAAAG,MACC,OAAC,SAAM,UAAU,mGAAmG,gBAEpH,KAEF,OAACE,EAAA,CACC,UAAU,0FACV,KAAML,EAAQ,SAAS,MAAM,GAAG,MAChC,IAAKA,EAAQ,MACf,GACF,KACA,QAAC,OAAI,UAAU,aACb,oBAAC,MAAG,UAAU,gFACX,SAAAA,EAAQ,MACX,KACA,OAAC,OAAI,UAAU,aACb,oBAAC,QAAK,UAAU,+DACd,oBAACM,EAAA,CAAM,qBAAoB,GAAC,KAAML,EAAO,EACxCE,MACC,OAACG,EAAA,CACC,UAAU,0BACV,qBAAoB,GACpB,KAAMJ,EACR,GAEJ,EACF,GACF,GACF,EACF,CAEJ,CDPI,IAAAK,EAAA,OA/BW,SAARC,EAA6B,CAAC,WAAAC,EAAY,IAAAC,CAAG,EAAG,CACrD,GAAM,CAACC,EAAUC,CAAW,KAAI,YAC9BH,EAAW,SAAS,SAAS,WAC/B,EAEM,CAACI,EAAWC,CAAY,KAAI,YAChCL,EAAW,SAAS,SAAS,SAC/B,EAEM,CAACM,EAAUC,CAAW,KAAI,YAASP,EAAW,SAAS,OAAS,CAAC,CAAC,EAIlEQ,EAAUC,EAAW,EAE3B,SAASC,GAAoB,CAG3BF,EAAQ,KAAK,GAAGP,kBAAoBG,GAAW,CACjD,CAEA,sBAAU,IAAM,CACd,GAAI,CAACI,EAAQ,KAAM,OACnB,GAAM,CAAC,WAAAR,CAAU,EAAIQ,EAAQ,KAE7BD,EAAaI,GAAS,CAAC,GAAGA,EAAM,GAAGX,EAAW,SAAS,KAAK,CAAC,EAC7DG,EAAYH,EAAW,SAAS,SAAS,WAAW,EACpDK,EAAaL,EAAW,SAAS,SAAS,SAAS,CACrD,EAAG,CAACQ,EAAQ,IAAI,CAAC,KAGf,QAAC,WAAQ,UAAU,6BACjB,oBAAC,OAAI,UAAU,+FACZ,SAAAF,EAAS,IAAKM,MACb,OAACC,EAAA,CAA6B,QAASD,GAArBA,EAAQ,EAAsB,CACjD,EACH,EACCV,MACC,OAAC,OAAI,UAAU,wCACb,mBAAC,UACC,UAAU,6GACV,SAAUM,EAAQ,QAAU,OAC5B,QAASE,EAER,SAAAF,EAAQ,QAAU,OAAS,aAAe,qBAC7C,EACF,GAEJ,CAEJ,CELI,IAAAM,EAAA,OA3CEC,EAAM,CAAC,CAAC,KAAAC,CAAI,KAAO,CACvB,MAAOA,GAAM,YAAY,MACzB,YAAaA,GAAM,YAAY,WACjC,GAEaC,EAAS,CACpB,IAAAF,CACF,EA0BO,IAAMG,EAAO,CAAC,CAAC,KAAAC,CAAI,KACjB,CACL,MAAOA,GAAM,YAAY,OAAS,aAClC,YAAaA,GAAM,YAAY,WACjC,GAGa,SAARC,GAA8B,CACnC,GAAM,CAAC,WAAAC,CAAU,EAAIC,EAAc,EACnC,SACE,oBACE,qBAAC,UAAO,UAAU,wEAChB,oBAAC,MAAG,UAAU,4CACX,SAAAD,EAAW,MACd,EAECA,EAAW,gBACV,OAAC,OAAI,UAAU,6CACb,mBAAC,OACC,mBAAC,KAAE,UAAU,8DACV,SAAAA,EAAW,YACd,EACF,EACF,GAEJ,KACA,OAACE,EAAA,CACC,WAAYF,EACZ,IAAK,gBAAgBA,EAAW,SAClC,GACF,CAEJ",
  "names": ["import_react", "import_jsx_runtime", "ProductCard", "product", "price", "compareAtPrice", "isDiscounted", "Link", "Image", "Money", "import_jsx_runtime", "ProductGrid", "collection", "url", "nextPage", "setNextPage", "endCursor", "setEndCursor", "products", "setProducts", "fetcher", "useFetcher", "fetchMoreProducts", "prev", "product", "ProductCard", "import_jsx_runtime", "seo", "data", "handle", "meta", "data", "Collection", "collection", "useLoaderData", "ProductGrid"]
}
