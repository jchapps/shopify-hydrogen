import"./7a9a8af7.js";import{r as d,T as y,c as w,F as k,j as i}from"./index.6f748f0d.js";import{s as j,I as F,u as B}from"./39b392d2.js";import{ModelViewer as q}from"./f2c1a185.js";import"./ca3f753a.js";import"./f0cb2633.js";import"./02637587.js";import{P as T}from"./af7a5f6d.js";import{BaseButton as M}from"./ed42352b.js";import"./64cd4376.js";import{f as v}from"./92add5bc.js";import{ProductPrice as I}from"./e654b0a7.js";import{j as $}from"./debc9983.js";import"./9146eeac.js";import"./dacc7198.js";import"./7467e845.js";import"./3ed2f817.js";import"./76030b17.js";import"./8d6e2a9a.js";import"./d6282b27.js";function N(){const e=d.exports.useContext(T);if(!e)throw new Error("'useProductOptions' must be a child of <ProductOptionsProvider/>");return e}function D(e,r){if(r==null)return e;const n=Object.keys(r).reduce((t,s)=>{const l=r[s];return l==null?t:t+`&${s}=${l}`},"");return`${e}?${n}`}function L(e,r){return d.exports.useMemo(()=>r?D(e,r):e,[e,r])}function U(e){var p,h;const{data:r,previewImageOptions:n,id:t=r.id,playsInline:s=!0,controls:l=!0,sourceProps:a={},...c}=e,o=j({src:(h=(p=r.previewImage)==null?void 0:p.url)!=null?h:"",...n});if(!r.sources)throw new Error("<Video/> requires a 'data.sources' array");return y.createElement("video",{...c,id:t,playsInline:s,controls:l,poster:o},r.sources.map(u=>{if(!((u==null?void 0:u.url)&&(u==null?void 0:u.mimeType)))throw new Error("<Video/> needs 'source.url' and 'source.mimeType'");return y.createElement("source",{...a,key:u.url,src:u.url,type:u.mimeType})}))}function V(e){const{data:r,options:n,id:t=r.id,frameBorder:s="0",allow:l="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:a=!0,loading:c="lazy",...o}=e;if(!r.embedUrl)throw new Error("<ExternalVideo/> requires the 'embedUrl' property");const p=L(r.embedUrl,n);return y.createElement("iframe",{...o,id:t!=null?t:r.embedUrl,frameBorder:s,allow:l,allowFullScreen:a,src:p,loading:c})}function _({data:e,options:r,...n}){switch(e.mediaContentType){case"IMAGE":{const t=e.image;return!t||!t.url?(console.warn(`No "image" property was found on the "data" prop for <MediaFile/>, for the "type='image'"`),null):y.createElement(F,{...n,data:t,loaderOptions:r})}case"VIDEO":return y.createElement(U,{...n,data:e,previewImageOptions:r});case"EXTERNAL_VIDEO":return y.createElement(V,{...n,data:e,options:r});case"MODEL_3D":return y.createElement(q,{...n,data:e});default:return null}}function G(e){var f;const[r,n]=d.exports.useState(!1),{variantId:t,quantity:s=1,attributes:l,sellingPlanId:a,onClick:c,children:o,accessibleAddingToCartLabel:p,...h}=e,{status:u,linesAdd:x}=B(),{selectedVariant:P}=N(),O=(f=t!=null?t:P==null?void 0:P.id)!=null?f:"",E=t===null||O===""||P===null||r||h.disabled;d.exports.useEffect(()=>{r&&u==="idle"&&n(!1)},[u,r]);const m=d.exports.useCallback(()=>{n(!0),x([{quantity:s,merchandiseId:O,attributes:l,sellingPlanId:a}])},[x,s,O,l,a]);return w(k,{children:[i(M,{...h,disabled:E,onClick:c,defaultOnClick:m,children:o}),p?i("p",{style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},role:"alert","aria-live":"assertive",children:r?p:null}):null]})}function C(e,r){var n,t;if(!(!e.length||((t=(n=e==null?void 0:e[0])==null?void 0:n.selectedOptions)==null?void 0:t.length)!==Object.keys(r).length))return e==null?void 0:e.find(s=>Object.entries(r).every(([l,a])=>{var c;return(c=s==null?void 0:s.selectedOptions)==null?void 0:c.some(o=>(o==null?void 0:o.name)===l&&(o==null?void 0:o.value)===a)}))}function H(e){const r=e.reduce((n,t)=>{var s;if(!t.selectedOptions)throw new Error("'getOptions' requires 'variant.selectedOptions'");return(s=t==null?void 0:t.selectedOptions)==null||s.forEach(l=>{var a,c,o,p;n[(a=l==null?void 0:l.name)!=null?a:""]=n[(c=l==null?void 0:l.name)!=null?c:""]||new Set,n[(o=l==null?void 0:l.name)!=null?o:""].add((p=l==null?void 0:l.value)!=null?p:"")}),n},{});return Object.keys(r).map(n=>({name:n,values:Array.from(r[n])}))}function R({children:e,data:r,initialVariantId:n}){const t=d.exports.useMemo(()=>{var m;return v((m=r.variants)!=null?m:{})},[r.variants]);if(!z(t))throw new Error("<ProductOptionsProvider/> requires 'product.variants.nodes' or 'product.variants.edges'");const s=d.exports.useMemo(()=>H(t),[t]),[l,a]=d.exports.useState(()=>A(n,t)),[c,o]=d.exports.useState(()=>S(l));d.exports.useEffect(()=>{const m=A(n,t);a(m),o(S(m))},[n,t]);const p=d.exports.useCallback((m,f)=>{o(g=>{const b={...g,[m]:f};return a(C(t,b)),b})},[o,t]),h=d.exports.useCallback((m,f)=>{var b;const g=C(t,{...c,[m]:f});return(b=g==null?void 0:g.availableForSale)!=null?b:!0},[c,t]),u=d.exports.useMemo(()=>{var m;return v((m=r.sellingPlanGroups)!=null?m:{}).map(f=>{var g;return{...f,sellingPlans:v((g=f==null?void 0:f.sellingPlans)!=null?g:{})}})},[r.sellingPlanGroups]),[x,P]=d.exports.useState(void 0),O=d.exports.useMemo(()=>{var m,f;if(!(!l||!x)){if(!((m=l.sellingPlanAllocations)!=null&&m.nodes)&&!((f=l.sellingPlanAllocations)!=null&&f.edges))throw new Error("<ProductOptionsProvider/>: You must include 'sellingPlanAllocations.nodes' or 'sellingPlanAllocations.edges' in your variants in order to calculate selectedSellingPlanAllocation");return v(l.sellingPlanAllocations).find(g=>{var b;return((b=g==null?void 0:g.sellingPlan)==null?void 0:b.id)===x.id})}},[l,x]),E=d.exports.useMemo(()=>({variants:t,variantsConnection:r.variants,options:s,selectedVariant:l,setSelectedVariant:a,selectedOptions:c,setSelectedOption:p,setSelectedOptions:o,isOptionInStock:h,selectedSellingPlan:x,setSelectedSellingPlan:P,selectedSellingPlanAllocation:O,sellingPlanGroups:u,sellingPlanGroupsConnection:r.sellingPlanGroups}),[h,s,r.sellingPlanGroups,r.variants,c,x,O,l,u,p,t]);return i(T.Provider,{value:E,children:e})}function A(e,r){if(e){const n=r.find(t=>(t==null?void 0:t.id)===e);return n||console.warn("<ProductOptionsProvider/> received a 'initialVariantId' prop, but could not actually find a variant with that ID"),n}if(e===null)return null;if(e===void 0)return r.find(n=>n==null?void 0:n.availableForSale)||r[0]}function S(e){return e!=null&&e.selectedOptions?e.selectedOptions.reduce((r,n)=>{var t,s;return r[(t=n==null?void 0:n.name)!=null?t:""]=(s=n==null?void 0:n.value)!=null?s:"",r},{}):{}}function z(e){return!(!e||!Array.isArray(e))}function W(e){const{createInstantCheckout:r,checkoutUrl:n}=$(),[t,s]=d.exports.useState(!1),{quantity:l,variantId:a,onClick:c,attributes:o,children:p,...h}=e;d.exports.useEffect(()=>{n&&(window.location.href=n)},[n]);const u=d.exports.useCallback(()=>{s(!0),r({lines:[{quantity:l!=null?l:1,merchandiseId:a,attributes:o}]})},[r,l,a,o]);return i(M,{disabled:t!=null?t:h.disabled,...h,onClick:c,defaultOnClick:u,children:p})}function xe({product:e}){return i(R,{data:e,children:i("section",{className:"w-full overflow-x-hidden gap-4 :gap-8 grid p-6 md:p-8 lg:p-12",children:w("div",{className:"grid gap-6 lg:gap-20 sm:grid-cols-2 lg:grid-cols-3",children:[i("div",{className:"grid md:grid-flow-row  md:p-0 md:overflow-x-auto md:grid-cols-2 md:w-full lg:col-span-2",children:i("div",{className:"md:col-span-2 snap-center card-image aspect-square md:w-full w-[80vw] shadow rounded",children:i(J,{media:e.media.nodes})})}),w("div",{className:"sticky sm:mx-auto max-w-xl sm:max-w-[24rem] p-0 md:p-6 md:px-0 top-[6rem] lg:top-[8rem] xl:top-[10rem]",children:[w("div",{className:"grid gap-2",children:[i("h1",{className:"text-4xl font-bold leading-10 whitespace-normal",children:e.title}),i("span",{className:"font-satisfy text-xl max-w-prose mb-4 whitespace-pre-wrap inherit text-copy opacity-50 font-medium",children:e.vendor})]}),i("div",{children:i("div",{className:"prose border-t mb-8 border-gray-200 pt-6 text-black text-md",dangerouslySetInnerHTML:{__html:e.descriptionHtml}})}),i(X,{product:e})]})]})})})}function X({product:e}){const{options:r,selectedVariant:n}=N();return w("form",{className:"grid gap-10",children:[i("div",{className:"grid gap-4",children:r.map(({name:t,values:s})=>s.length===1?null:w("div",{className:"flex flex-wrap items-baseline justify-start gap-6",children:[i("legend",{className:"whitespace-pre-wrap max-w-prose font-bold text-lead min-w-[4rem]",children:t}),i("div",{className:"flex flex-wrap items-baseline gap-4",children:i(Z,{name:t,values:s})})]},t))}),w("div",{className:"flex justify-start gap-8",children:[i("div",{className:"text-gray-900 text-lg font-semibold ",children:"Price  "}),i(I,{className:"text-gray-900 text-lg",variantId:n.id,data:e}),i(I,{className:"text-gray-500 line-through text-lg",priceType:"compareAt",variantId:n.id,data:e})]}),i("div",{className:"grid items-stretch gap-4",children:i(Y,{})})]})}function Y(){const{selectedVariant:e}=N(),r=!(e!=null&&e.availableForSale)||!1;return w(k,{children:[i(G,{type:"button",variantId:e.id,quantity:1,accessibleAddingToCartLabel:"Adding item to your cart",disabled:r,children:i("span",{className:"bg-black text-white inline-block rounded-sm font-medium text-center py-3 px-6 max-w-xl leading-none w-full",children:r?"Sold out":"Add to cart"})}),r?i("span",{className:"text-black text-center py-3 px-6 border rounded-sm leading-none ",children:"Available in 2-3 weeks"}):i(W,{variantId:e.id,children:i("span",{className:"inline-block rounded-sm font-medium text-center py-3 px-6 max-w-xl leading-none border w-full",children:"Buy Now"})})]})}function Z({values:e,name:r}){const{selectedOptions:n,setSelectedOption:t}=N();return i(k,{children:e.map(s=>{const l=n[r]===s,a=`option-${r}-${s}`;return w("label",{htmlFor:a,children:[i("input",{className:"sr-only",type:"radio",id:a,name:`option[${r}]`,value:s,checked:l,onChange:()=>t(r,s)}),i("div",{className:`leading-none border-b-[2px] py-1 cursor-pointer transition-all duration-200 ${l?"border-rose-200":"border-neutral-50"}`,children:s})]},a)})})}function J({media:e}){return e.length?i("div",{className:"grid gap-4 grid-flow-col md:grid-flow-row md:p-0 md:grid-cols-2 w-screen md:w-full lg:col-span-2",children:e.map((r,n)=>{let t={};r.mediaContentType==="MODEL_3D"&&(t={interactionPromptThreshold:"0",ar:!0,loading:"eager",disableZoom:!0});const s={...r,image:{...r.image,altText:r.alt||"Product image"}};return i("div",{className:`${n%3===0?"md:col-span-2":"md:col-span-1"} snap-center card-image bg-white aspect-square w-[80vw] sm:w-[90vw] md:w-full shadow-sm rounded`,children:i(_,{tabIndex:"0",className:"w-full h-full aspect-square rounded object-cover",data:s,options:{crop:"center"},...t})},r.id||r.image.id)})}):null}export{xe as default};
//# sourceMappingURL=546f178f.js.map
